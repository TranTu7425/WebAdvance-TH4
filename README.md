# 👗 Phenikaa Fashion Shop - Thời Trang Sành Điệu

## Thành viên dự án
- **Trần Anh Tú:** 23010332

## Truy cập dự án
- **Public Link:** [Phenikaa Fashion Shop - Thời trang sành điệu](http://www.pkafashionshop.live/)
- **Demo Link:** [Đang cập nhật]

## Mô tả
`Phenikaa Fashion Shop` là một ứng dụng web thương mại điện tử chuyên về thời trang, được xây dựng trên Laravel Framework. Website cung cấp giao diện thân thiện với người dùng, tích hợp đầy đủ các tính năng cần thiết cho một hệ thống thương mại điện tử hiện đại.

### Đối tượng người dùng
- Khách hàng cá nhân yêu thích thời trang
- Người tiêu dùng trẻ tuổi (18-35 tuổi)
- Người dùng thích mua sắm trực tuyến
- Quản trị viên và nhân viên cửa hàng

### Giá trị cốt lõi
- **Chất lượng sản phẩm:** Cam kết cung cấp sản phẩm thời trang chất lượng cao
- **Trải nghiệm người dùng:** Giao diện thân thiện, dễ sử dụng
- **Dịch vụ khách hàng:** Hỗ trợ nhanh chóng, chuyên nghiệp
- **Bảo mật:** Đảm bảo an toàn thông tin và giao dịch

## 🎯 Mục tiêu dự án

### Mục tiêu ngắn hạn
1. **Phát triển hệ thống**
   - Xây dựng nền tảng thương mại điện tử hoàn chỉnh
   - Tích hợp đầy đủ các tính năng cần thiết
   - Đảm bảo hiệu suất và bảo mật hệ thống

2. **Trải nghiệm người dùng**
   - Tạo giao diện thân thiện, dễ sử dụng
   - Tối ưu hóa quy trình mua sắm
   - Cung cấp trải nghiệm mua sắm mượt mà

3. **Quản lý sản phẩm**
   - Xây dựng hệ thống quản lý sản phẩm hiệu quả
   - Tổ chức danh mục sản phẩm rõ ràng
   - Quản lý tồn kho chính xác

### Mục tiêu dài hạn
1. **Phát triển thương hiệu**
   - Xây dựng thương hiệu thời trang uy tín
   - Mở rộng danh mục sản phẩm
   - Phát triển cộng đồng khách hàng trung thành

2. **Mở rộng thị trường**
   - Phát triển đa kênh bán hàng
   - Mở rộng phạm vi phục vụ
   - Tăng cường hợp tác với các đối tác

3. **Cải tiến liên tục**
   - Cập nhật công nghệ mới
   - Nâng cao chất lượng dịch vụ
   - Tối ưu hóa trải nghiệm người dùng

## 📦 Tính năng chính
- **Xác thực người dùng**
  - Đăng ký tài khoản
  - Đăng nhập/Đăng xuất
  - Quản lý thông tin cá nhân
  - Quản lý địa chỉ giao hàng

- **Quản lý sản phẩm**
  - Hiển thị danh sách sản phẩm theo danh mục
  - Tìm kiếm và lọc sản phẩm
  - Chi tiết sản phẩm với hình ảnh
  - Quản lý thương hiệu (Brands)
  - Quản lý danh mục (Categories)

- **Giỏ hàng & Thanh toán**
  - Thêm/Xóa sản phẩm vào giỏ
  - Cập nhật số lượng sản phẩm
  - Áp dụng mã giảm giá
  - Thanh toán an toàn
  - Quản lý địa chỉ giao hàng

- **Quản lý đơn hàng**
  - Theo dõi trạng thái đơn hàng
  - Lịch sử đơn hàng
  - Xuất hóa đơn
  - Quản lý giao hàng

- **Trang quản trị**
  - Dashboard thống kê doanh thu
  - Quản lý sản phẩm và tồn kho
  - Quản lý đơn hàng và trạng thái
  - Quản lý người dùng
  - Quản lý mã giảm giá
  - Quản lý slider trang chủ
  - Quản lý liên hệ
  - Cài đặt hệ thống

## UML của dự án
**Sơ đồ cấu trúc (Class Diagram)**
<img src="public/assets/images/giaodien/classuml.png"/>

## 🚀 Giao diện hệ thống
 **Giao diện đăng nhập:**
<img src="public/assets/images/giaodien/dnhap.png"/>
 **Giao diện đăng ký tài khoản:**
<img src="public/assets/images/giaodien/dky.png"/>
 **Giao diện bảng điều khiển cho quản trị viên:**
<img src="public/assets/images/giaodien/dashboard.png"/>
 **Giao diện quản lý danh sách các sản phẩm:**
<img src="public/assets/images/giaodien/dsachsanpham.png"/>
 **Giao diện quản lý danh sách các thương hiệu:**
<img src="public/assets/images/giaodien/dsachthuonghieu.png"/>
 **Giao diện quản lý danh sách các danh mục:**
<img src="public/assets/images/giaodien/dsdanhmuc.png"/>
 **Giao diện quản lý đơn hàng:**
<img src="public/assets/images/giaodien/donhang.png"/>
 **Giao diện quản lý slide:**
<img src="public/assets/images/giaodien/dsslide.png"/>
 **Giao diện quản lý mã giảm giá:**
<img src="public/assets/images/giaodien/magiamgia.png"/>
 **Giao diện quản lý các liên hệ từ người dùng:**
<img src="public/assets/images/giaodien/tinnhan.png"/>
 **Giao diện quản lý tài khoản người dùng:**
<img src="public/assets/images/giaodien/user.png"/>
 **Giao diện cài đặt tài khoản quản trị viên:**
<img src="public/assets/images/giaodien/caidat.png"/>

## Giao diện người dùng/khách:
**Giao diện trang chủ:**
<img src="public/assets/images/giaodien/trangchu.png"/>
 **Giao diện cửa hàng:**
<img src="public/assets/images/giaodien/cuahang.png"/>
 **Giao diện thông tin sản phẩm:**
<img src="public/assets/images/giaodien/spham.png"/>
 **Giao diện giỏ hàng:**
<img src="public/assets/images/giaodien/giohang.png"/>
 **Giao diện liên hệ hỗ trợ:**
<img src="public/assets/images/giaodien/lienhe.png"/>
 **Giao diện giới thiệu cửa hàng:**
<img src="public/assets/images/giaodien/giothieu.png"/>
 **Giao diện bảng điều khiển tài khoản người dùng:**
<img src="public/assets/images/giaodien/user1.png"/>

## Cơ sở dữ liệu:
<img src="public/assets/images/giaodien/database.png"/>

## Minh họa một số đoạn code chính
## `UserController`

**Tệp tin:** `app/Http/Controllers/UserController.php`

Controller này chịu trách nhiệm xử lý các logic liên quan đến tài khoản người dùng đã đăng nhập, bao gồm trang tổng quan, xem lịch sử đơn hàng, chi tiết đơn hàng và các hành động khác của người dùng.

### 1. `index()`

- **Mô tả:** Hiển thị trang tổng quan (dashboard) cho người dùng đã đăng nhập.
- **Phương thức:** `GET`
- **Route (đề xuất):** `/user/dashboard`
- **Luồng xử lý:**
    - Trả về view `user.index`.
- **Code:**
  ```php
  public function index()
  {
      return view('user.index');
  }
  ```

### 2. `orders()`

- **Mô tả:** Lấy và hiển thị danh sách các đơn hàng của người dùng hiện tại.
- **Phương thức:** `GET`
- **Route (đề xuất):** `/user/orders`
- **Luồng xử lý:**
    1. Lấy ID của người dùng đang đăng nhập thông qua `Auth::user()->id`.
    2. Truy vấn cơ sở dữ liệu để lấy tất cả các đơn hàng (`Order`) có `user_id` tương ứng.
    3. Sắp xếp kết quả theo ngày tạo (`created_at`) giảm dần.
    4. Phân trang kết quả, mỗi trang hiển thị 10 đơn hàng (`paginate(10)`).
    5. Trả về view `user.orders` cùng với biến `$orders` chứa danh sách đơn hàng đã phân trang.
- **Code:**
  ```php
  public function orders()
  {
      $orders = Order::where('user_id', Auth::user()->id)->orderBy('created_at', 'desc')->paginate(10);
      return view('user.orders', compact('orders'));
  }
  ```

### 3. `order_details($order_id)`

- **Mô tả:** Hiển thị thông tin chi tiết của một đơn hàng cụ thể, bao gồm các sản phẩm và thông tin giao dịch.
- **Phương thức:** `GET`
- **Route (đề xuất):** `/user/orders/{order_id}`
- **Tham số:**
    - `$order_id`: ID của đơn hàng cần xem.
- **Luồng xử lý:**
    1. Tìm kiếm đơn hàng (`Order`) với `id` được cung cấp **và** phải thuộc về người dùng đang đăng nhập (`user_id` = `Auth::user()->id`). Đây là một bước bảo mật quan trọng để đảm bảo người dùng không xem được đơn hàng của người khác.
    2. **Nếu tìm thấy đơn hàng:**
        - Lấy danh sách các sản phẩm trong đơn hàng (`OrderItem`) và phân trang (12 sản phẩm/trang).
        - Lấy thông tin giao dịch (`Transaction`) liên quan đến đơn hàng.
        - Trả về view `user.order-details` với các dữ liệu: `$order`, `$orderItems`, `$transaction`.
    3. **Nếu không tìm thấy đơn hàng** (do sai ID hoặc không có quyền truy cập):
        - Chuyển hướng người dùng về trang đăng nhập.
- **Code:**
  ```php
  public function order_details($order_id)
  {
      $order = Order::where('user_id', Auth::user()->id)->where('id', $order_id)->first();
      if($order) {
          $orderItems = OrderItem::where('order_id', $order->id)->orderBy('id')->paginate(12);
          $transaction = Transaction::where('order_id', $order->id)->first();
          return view('user.order-details', compact('order', 'orderItems', 'transaction'));
      } else {
          return redirect()->route('login');
      }
  }
  ```

### 4. `order_cancel(Request $request)`

- **Mô tả:** Xử lý yêu cầu hủy một đơn hàng.
- **Phương thức:** `POST` (hoặc `PUT`/`PATCH`)
- **Route (đề xuất):** `/user/orders/cancel`
- **Tham số:**
    - `Request $request`: Chứa `order_id` của đơn hàng cần hủy, được gửi lên từ form.
- **Luồng xử lý:**
    1. Tìm đơn hàng (`Order`) dựa trên `order_id` nhận được từ request.
    2. Cập nhật trạng thái (`status`) của đơn hàng thành `canceled`.
    3. Ghi lại ngày hủy đơn (`canceled_date`) là thời gian hiện tại.
    4. Lưu các thay đổi vào cơ sở dữ liệu.
    5. Chuyển hướng người dùng trở lại trang trước đó với một thông báo flash (`status`) về việc hủy đơn thành công.
- **Lưu ý:** Phương thức này không kiểm tra xem đơn hàng có thuộc về người dùng đang đăng nhập hay không. Bạn nên thêm bước kiểm tra này để tăng cường bảo mật.
- **Code:**
  ```php
  public function order_cancel(Request $request)
  {
      // TODO: Add authorization check: Ensure the order belongs to the authenticated user.
      $order = Order::find($request->order_id);
      $order->status = 'canceled';
      $order->canceled_date = Carbon::now();
      $order->save();
      return back()->with('status', 'Order canceled successfully!');
  }
  ```

## `User` Model

**Tệp tin:** `app/Models/User.php`

Đây là model trung tâm của ứng dụng, chịu trách nhiệm biểu diễn dữ liệu và hành vi của một người dùng. Model này kế thừa từ `Illuminate\Foundation\Auth\User as Authenticatable`, có nghĩa là nó đã được tích hợp sẵn các chức năng cần thiết cho việc xác thực (authentication) trong Laravel.

### Đặc điểm chính

- **Xác thực:** Có thể được sử dụng với hệ thống Auth của Laravel (ví dụ: `Auth::user()`, `Auth::attempt()`).
- **Thông báo:** Sử dụng `Notifiable` trait, cho phép người dùng có thể nhận các thông báo (notifications) của Laravel, ví dụ như email đặt lại mật khẩu.
- **Factory:** Sử dụng `HasFactory` trait để dễ dàng tạo dữ liệu mẫu cho việc testing.

### Thuộc tính (Properties)

#### `fillable` (Mass Assignment)

Các thuộc tính được liệt kê trong mảng `$fillable` có thể được gán giá trị hàng loạt. Đây là một cơ chế bảo mật của Laravel để ngăn chặn việc người dùng tự ý cập nhật các cột không mong muốn trong cơ sở dữ liệu.

- `name`: Tên của người dùng.
- `email`: Địa chỉ email (thường dùng để đăng nhập).
- `phone`: Số điện thoại của người dùng.
- `password`: Mật khẩu (sẽ được tự động băm).
- `utype`: Loại người dùng (ví dụ: 'USR' cho người dùng thông thường, 'ADM' cho quản trị viên).

```php
protected $fillable = [
    'name',
    'email',
    'phone',
    'password',
    'utype',
];
```

#### `hidden` (Thuộc tính ẩn)

Các thuộc tính này sẽ bị ẩn đi khi model được chuyển đổi thành mảng (array) hoặc JSON. Điều này giúp bảo vệ các thông tin nhạy cảm không bị lộ ra ngoài, đặc biệt khi xây dựng API.

- `password`: Luôn ẩn hash mật khẩu.
- `remember_token`: Ẩn token "ghi nhớ đăng nhập".

```php
protected $hidden = [
    'password',
    'remember_token',
];
```

#### `casts()` (Attribute Casting)

Phương thức này tự động chuyển đổi các thuộc tính sang một kiểu dữ liệu mong muốn khi bạn truy cập chúng.

- `email_verified_at`: Tự động chuyển đổi thành một đối tượng `Carbon`, giúp dễ dàng thao tác với ngày tháng.
- `password`: **Tự động băm (hash)** giá trị khi bạn gán một mật khẩu mới cho thuộc tính này. Ví dụ: `$user->password = 'new-password';` sẽ tự động lưu hash vào CSDL.

```php
protected function casts(): array
{
    return [
        'email_verified_at' => 'datetime',
        'password' => 'hashed',
    ];
}
```

### Các mối quan hệ (Eloquent Relationships)

#### `settings()`

- **Mô tả:** Định nghĩa mối quan hệ một-nhiều (one-to-many) với model `Setting`.
- **Ý nghĩa:** Một người dùng có thể có nhiều cài đặt.
- **Sử dụng:** `$user->settings` để lấy tất cả cài đặt của người dùng.
- **Code:**
  ```php
  public function settings()
  {
      return $this->hasMany(Setting::class);
  }
  ```

#### `addresses()`

- **Mô tả:** Định nghĩa mối quan hệ một-nhiều (one-to-many) với model `Address`.
- **Ý nghĩa:** Một người dùng có thể có nhiều địa chỉ.
- **Sử dụng:** `$user->addresses` để lấy danh sách địa chỉ của người dùng.
- **Code:**
  ```php
  public function addresses()
  {
      return $this->hasMany(Address::class);
  }
  ```

#### `contacts()`

- **Mô tả:** Định nghĩa mối quan hệ một-nhiều (one-to-many) với model `Contact`.
- **Ý nghĩa:** Một người dùng có thể có nhiều thông tin liên hệ.
- **Sử dụng:** `$user->contacts` để lấy danh sách liên hệ của người dùng.
- **Code:**
  ```php
  public function contacts()
  {
      return $this->hasMany(Contact::class);
  }
  ```

## Giao diện (View): Thanh điều hướng Tài khoản Người dùng

**Tệp tin:** `resources/views/user/account-nav.blade`

Đây là đoạn mã Blade tạo ra menu điều hướng dọc trong khu vực quản lý tài khoản của người dùng. Mỗi mục trong menu dẫn người dùng đến một trang chức năng khác nhau.

### Phân tích chi tiết các mục

```html
<ul class="account-nav">
    <li><a href="{{ route('user.index') }}" class="menu-link menu-link_us-s">Bảng điều khiển</a></li>
    <li><a href="{{ route('user.orders') }}" class="menu-link menu-link_us-s">Đơn hàng</a></li>
    <li><a href="account-address.html" class="menu-link menu-link_us-s">Địa chỉ</a></li>
    <li><a href="account-details.html" class="menu-link menu-link_us-s">Thông tin tài khoản</a></li>
    <li><a href="{{ route('wishlist.index') }}" class="menu-link menu-link_us-s">Danh sách yêu thích</a></li>
    <li>
        <form method="POST" action="{{ route('logout') }}" id="logout-form">
            @csrf
            <a href="{{ route('logout') }}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                Đăng xuất
            </a>
        </form>
    </li>
</ul>
```

---

### 1. Bảng điều khiển (Dashboard)

- **Tên liên kết:** "Bảng điều khiển"
- **Hành động:** Đưa người dùng đến trang tổng quan chính của tài khoản.
- **Route được sử dụng:** `user.index`
- **Phương thức Controller tương ứng:** `UserController@index`

```html
<li><a href="{{ route('user.index') }}" class="menu-link menu-link_us-s">Bảng điều khiển</a></li>
```

### 2. Đơn hàng (Orders)

- **Tên liên kết:** "Đơn hàng"
- **Hành động:** Hiển thị danh sách lịch sử các đơn hàng đã đặt của người dùng.
- **Route được sử dụng:** `user.orders`
- **Phương thức Controller tương ứng:** `UserController@orders`

```html
<li><a href="{{ route('user.orders') }}" class="menu-link menu-link_us-s">Đơn hàng</a></li>
```

### 3. Địa chỉ (Addresses)

- **Tên liên kết:** "Địa chỉ"
- **Hành động:** Dẫn đến trang quản lý địa chỉ giao hàng/thanh toán.
- **Route được sử dụng:** `account-address.html` (liên kết tĩnh)
- **Ghi chú:** Hiện tại, đây là một liên kết tĩnh. Để hoàn thiện chức năng, cần chuyển nó thành một route động của Laravel (ví dụ: `{{ route('user.addresses') }}`) và tạo một phương thức trong Controller để xử lý.

```html
<li><a href="account-address.html" class="menu-link menu-link_us-s">Địa chỉ</a></li>
```

### 4. Thông tin tài khoản (Account Details)

- **Tên liên kết:** "Thông tin tài khoản"
- **Hành động:** Cho phép người dùng xem và chỉnh sửa thông tin cá nhân (tên, email, mật khẩu).
- **Route được sử dụng:** `account-details.html` (liên kết tĩnh)
- **Ghi chú:** Tương tự như mục "Địa chỉ", đây là một liên kết tĩnh và cần được thay thế bằng một route động của Laravel (ví dụ: `{{ route('user.details') }}`) để có chức năng hoàn chỉnh.

```html
<li><a href="account-details.html" class="menu-link menu-link_us-s">Thông tin tài khoản</a></li>
```

### 5. Danh sách yêu thích (Wishlist)

- **Tên liên kết:** "Danh sách yêu thích"
- **Hành động:** Hiển thị trang chứa các sản phẩm mà người dùng đã thêm vào danh sách yêu thích.
- **Route được sử dụng:** `wishlist.index`
- **Phương thức Controller tương ứng:** `WishlistController@index` (giả định)

```html
<li><a href="{{ route('wishlist.index') }}" class="menu-link menu-link_us-s">Danh sách yêu thích</a></li>
```

### 6. Đăng xuất (Logout)

- **Tên liên kết:** "Đăng xuất"
- **Hành động:** Đăng xuất người dùng khỏi hệ thống.
- **Luồng hoạt động:**
    1. Đây không phải là một liên kết thông thường. Nó được đặt bên trong một thẻ `<form>`.
    2. Form này có phương thức `POST` và trỏ đến route `logout`. Chỉ thị `@csrf` được thêm vào để bảo vệ chống lại tấn công CSRF.
    3. Khi người dùng nhấp vào liên kết "Đăng xuất", đoạn mã JavaScript `onclick` sẽ được thực thi.
    4. `event.preventDefault();` ngăn trình duyệt thực hiện hành động mặc định (đi đến `href`).
    5. `document.getElementById('logout-form').submit();` tìm form có `id="logout-form"` và gửi (submit) form đó.
    6. Việc sử dụng `POST` cho chức năng đăng xuất là một phương pháp bảo mật tiêu chuẩn trong Laravel.

```html
<li>
    <form method="POST" action="{{ route('logout') }}" id="logout-form">
        @csrf
        <a href="{{ route('logout') }}" class="" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
            Đăng xuất
        </a>
    </form>
</li>
```

## 🚀 Yêu cầu hệ thống
- PHP >= 8.1
- Composer
- MySQL >= 5.7
- Node.js >= 16.x
- NPM >= 8.x

## 🔧 Hướng dẫn cài đặt
```bash
# Clone repository
git clone [repository-url]
cd phenikaa-fashion-shop

# Cài đặt dependencies
composer install
npm install

# Cấu hình môi trường
cp .env.example .env
php artisan key:generate

# Cấu hình database trong file .env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=phenikaa_fashion
DB_USERNAME=root
DB_PASSWORD=

# Chạy migrations và seeders
php artisan migrate --seed

# Build assets
npm run build

# Khởi chạy server
php artisan serve
```

## 📱 Công nghệ sử dụng
- **Backend:** Laravel 10.x
- **Frontend:** 
  - Blade Templates
  - TailwindCSS
  - Alpine.js
- **Database:** MySQL
- **Công cụ phát triển:**
  - Git
  - Composer
  - NPM

## 🤝 Đóng góp
Mọi đóng góp đều được hoan nghênh! Vui lòng thực hiện theo các bước sau:
1. Fork repository
2. Tạo branch mới (`git checkout -b feature/AmazingFeature`)
3. Commit thay đổi (`git commit -m 'Add some AmazingFeature'`)
4. Push lên branch (`git push origin feature/AmazingFeature`)
5. Tạo Pull Request

## 📄 Giấy phép
Dự án này được cấp phép theo [MIT License](LICENSE).

---
*Phenikaa Fashion Shop* - Thời trang sành điệu, phong cách riêng bạn!

